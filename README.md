
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."


## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

## Важно!

Перед отправкой работы на проверку удаляйте неиспользуемые ресурсы.
Это важно для того, чтоб предупредить неконтролируемый расход средств, полученных в результате использования промокода.

Подробные рекомендации [здесь](https://github.com/netology-code/virt-homeworks/blob/virt-11/r/README.md)

---

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

#### Ответ

Полная виртуализация - установленный гипервизор непосредственно на железо.
В итоге получается среда, аналогичная ОС, с полным управлением ресурсов сервера и жестким разделением таких ресурсов на уровне гипервизора.

Паравиртуализация - гипервизор устанавливается на ОС сервера и управляет разделением доступа к аппаратным средствам сервера.
ВМ на основе паравиртуализации также являются независимыми ОС и имеют независимое от хостовой ОС ядро.

Виртуализация на уровне ОС - виртуализация пользовательского окружения ОС.
Экземпляры пользовательского окружения аналогичны основной ОС и используют то же ядро ОС. Для основной ОС такие пользовательские окружения являются процессами.

---

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

#### Ответ
1. Высоконагруженная база данных, чувствительная к отказу.

***Физические серверы***. Для отказоустойчивых систем наиболее безопасным решением является физический сервер с настроенными RAID массивами. Возможно стоит рассмотреть вариант с кластеризацией нескольких серверов.

2. Различные web-приложения.

***Виртуализация уровня ОС***. Web-приложения не требовательны к аппаратным ресурсам и их легко можно разворачивать и масштабировать. Не требуется жесткий контроль к ресурсам сервера.

3. Windows системы для использования бухгалтерским отделом.

***Паравиртуализация***. Для данного случая подойдет гипервизор второго уровня, с индивидуальным управлением для каждой ВМ. Паравиртуализация подойдет из-за удобства бекапирования таких ВМ и управлением выделяемых ресурсов для каждой ВМ в отдельности.

4. Системы, выполняющие высокопроизводительные расчеты на GPU.

***Физические серверы***. Физические серверы предоставят максимальную производительность расчетов на GPU. Или можно использовать гипервизоры первого уровня - такие системы не будут сильно (или вообще) уступать железным решениям без виртуализации.

---

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

#### Ответ
1. ***Hyper-V***. В случае, если инфраструктура компании построена на Windows, то использования Hyper-V будет самым оптимальным решением. Обеспечивает репликацию, масштабируемость сервисов, есть механизм создания резервных копий. Развертывание Hyper-V подойдет для обеспечения работоспособности всей Windows инфраструктуры компании.
2. ***Xen PV или KVM***. Оба продукта open-source с паравиртуализацией, с шаблонами установки и обеспечением высокой производительности. Xen PV предпочтительнее из-за большей стабильности, KVM более удобен из-за низкого порога вхождения.
3. ***KVM***. Бесплатное решение, низкий порог вхождения. KVM обеспечивает очень хорошую производительность для гостевых Windows-хостов. Но если требуется покрывать задачи с интенсивным вводом-выводом (I/O), то лучше рассмотреть ***Xen PV***.
4. ***Xen HVM***. Бесплатный. Стабильная работа гипервизора, аппаратная виртуализация, очень надежен с гостевыми ОС на базе Linux.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

#### Ответ
**С точки зрения внедрения виртуализации в компании (накладные расходы):**

Использование гипервизоров нескольких производителей одновременно требует либо привлечения специалистов, которые имеют навыки работы со всеми этими продуктами виртуализации или иметь несколько групп специалистов, каждая из которых будет отвечать за работу своего гипервизора. В обоих случаях это приводит к дополнительным затратам на содержание специалистов, содержанию дополнительного серверного парка и появлению дополнительных расходов в приобретении лицензий на гипервизоры (в случае с коммерческими продуктами). Чтобы этого избежать, рекомендуется остановится на каком-либо одном вендоре и развивать инфраструктуру с одним видом виртуализации.

**С точки зрения развертывания виртуальной среды:**

Нельзя использовать одновременно два разных гипервизора одного уровня на одной хост-машине (например virtualbox+kvm).

Можно запустить гипервизор второго уровня на гостевой ОС гипервизора первого уровня (vmware + virtualbox).

Можно использовать виртуализацию уровня ОС (контейнеры) и паравиртуализацию на одном хосте. Это будет работать, т.к. паравиртуализация обеспечивает разделение ресурсов хоста для запущенных гостевых машин, а контейнеры запускают отдельные пользовательские окружения ОС хоста.

**Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет?**
Гетерогенные среды необходимы для производителей ПО, которые будут тестировать свои программные продукты в различных средах виртуализации. Также можно держать одновременно коммерческий гипервизор и open-source гипервизор чтобы обеспечить отказоустойчивость инфраструктуры компании.
